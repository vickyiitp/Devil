import{u as g,r as c,a2 as V,k as A,j as h,f as x,b,t as p,h as M,a3 as E,i as R,a4 as f}from"./index-D1Pec2V-.js";function C(t){const n=g(()=>A(t)),{isStatic:r}=c.useContext(V);if(r){const[,o]=c.useState(t);c.useEffect(()=>n.on("change",o),[])}return n}function S(t,n){const r=C(n()),o=()=>r.set(n());return o(),h(()=>{const e=()=>x.preRender(o,!1,!0),s=t.map(a=>a.on("change",e));return()=>{s.forEach(a=>a()),b(o)}}),r}function y(t){return typeof t=="number"?t:parseFloat(t)}function F(t,n={}){const{isStatic:r}=c.useContext(V),o=c.useRef(null),e=C(p(t)?y(t.get()):t),s=c.useRef(e.get()),a=c.useRef(()=>{}),i=()=>{const u=o.current;u&&u.time===0&&u.sample(M.delta),l(),o.current=E({keyframes:[e.get(),s.current],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...n,onUpdate:a.current})},l=()=>{o.current&&o.current.stop()};return c.useInsertionEffect(()=>e.attach((u,m)=>r?m(u):(s.current=u,a.current=m,x.update(i),e.get()),l),[JSON.stringify(n)]),h(()=>{if(p(t))return t.on("change",u=>e.set(y(u)))},[e]),e}const I=t=>t&&typeof t=="object"&&t.mix,L=t=>I(t)?t.mix:void 0;function j(...t){const n=!Array.isArray(t[0]),r=n?0:-1,o=t[0+r],e=t[1+r],s=t[2+r],a=t[3+r],i=R(e,s,{mixer:L(s[0]),...a});return n?i(o):i}function k(t){f.current=[],t();const n=S(f.current,t);return f.current=void 0,n}function N(t,n,r,o){if(typeof t=="function")return k(t);const e=typeof n=="function"?n:j(n,r,o);return Array.isArray(t)?d(t,e):d([t],([s])=>e(s))}function d(t,n){const r=g(()=>[]);return S(t,()=>{r.length=0;const o=t.length;for(let e=0;e<o;e++)r[e]=t[e].get();return n(r)})}export{C as a,F as b,N as u};
